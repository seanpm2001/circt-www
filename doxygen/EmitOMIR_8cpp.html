<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CIRCT: /home/runner/work/circt-www/circt-www/circt_src/lib/Dialect/FIRRTL/Transforms/EmitOMIR.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CIRCT
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_5ecba3b4683443cdd5d71918532517b3.html">FIRRTL</a></li><li class="navelem"><a class="el" href="dir_1f43711e4003e7a9e3d354ad53319866.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">EmitOMIR.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="FIRRTL_2Transforms_2PassDetails_8h_source.html">PassDetails.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AnnotationDetails_8h_source.html">circt/Dialect/FIRRTL/AnnotationDetails.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FIRParser_8h_source.html">circt/Dialect/FIRRTL/FIRParser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FIRRTLAnnotationHelper_8h_source.html">circt/Dialect/FIRRTL/FIRRTLAnnotationHelper.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FIRRTLInstanceGraph_8h_source.html">circt/Dialect/FIRRTL/FIRRTLInstanceGraph.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FIRRTLUtils_8h_source.html">circt/Dialect/FIRRTL/FIRRTLUtils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="NLATable_8h_source.html">circt/Dialect/FIRRTL/NLATable.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2FIRRTL_2Namespace_8h_source.html">circt/Dialect/FIRRTL/Namespace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2FIRRTL_2Passes_8h_source.html">circt/Dialect/FIRRTL/Passes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="HWAttributes_8h_source.html">circt/Dialect/HW/HWAttributes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SVDialect_8h_source.html">circt/Dialect/SV/SVDialect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SVOps_8h_source.html">circt/Dialect/SV/SVOps.h</a>&quot;</code><br />
<code>#include &quot;mlir/IR/ImplicitLocOpBuilder.h&quot;</code><br />
<code>#include &quot;llvm/ADT/TypeSwitch.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
<code>#include &quot;llvm/Support/JSON.h&quot;</code><br />
<code>#include &lt;functional&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for EmitOMIR.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="EmitOMIR_8cpp__incl.png" border="0" usemap="#a_2home_2runner_2work_2circt-www_2circt-www_2circt__src_2lib_2Dialect_2FIRRTL_2Transforms_2EmitOMIR_8cpp" alt=""/></div>
<map name="a_2home_2runner_2work_2circt-www_2circt-www_2circt__src_2lib_2Dialect_2FIRRTL_2Transforms_2EmitOMIR_8cpp" id="a_2home_2runner_2work_2circt-www_2circt-www_2circt__src_2lib_2Dialect_2FIRRTL_2Transforms_2EmitOMIR_8cpp">
<area shape="rect" title=" " alt="" coords="1488,5,1704,76"/>
<area shape="rect" href="FIRRTL_2Transforms_2PassDetails_8h.html" title=" " alt="" coords="2447,131,2556,158"/>
<area shape="rect" href="Dialect_2FIRRTL_2Passes_8h.html" title=" " alt="" coords="3190,213,3338,255"/>
<area shape="rect" href="AnnotationDetails_8h.html" title=" " alt="" coords="779,213,933,255"/>
<area shape="rect" href="FIRParser_8h.html" title=" " alt="" coords="917,124,1065,165"/>
<area shape="rect" href="FIRRTLAnnotationHelper_8h.html" title=" " alt="" coords="1222,124,1418,165"/>
<area shape="rect" href="FIRRTLInstanceGraph_8h.html" title=" " alt="" coords="528,213,704,255"/>
<area shape="rect" title=" " alt="" coords="161,489,375,515"/>
<area shape="rect" href="Dialect_2FIRRTL_2Namespace_8h.html" title=" " alt="" coords="1254,213,1402,255"/>
<area shape="rect" title=" " alt="" coords="1008,221,1179,247"/>
<area shape="rect" href="FIRRTLUtils_8h.html" title=" " alt="" coords="1522,124,1670,165"/>
<area shape="rect" href="NLATable_8h.html" title=" " alt="" coords="669,303,817,344"/>
<area shape="rect" href="HWAttributes_8h.html" title=" " alt="" coords="2561,310,2791,337"/>
<area shape="rect" href="SVDialect_8h.html" title=" " alt="" coords="2815,310,3015,337"/>
<area shape="rect" href="SVOps_8h.html" title=" " alt="" coords="1773,221,1952,247"/>
<area shape="rect" title=" " alt="" coords="2631,131,2793,158"/>
<area shape="rect" title=" " alt="" coords="2818,131,2971,158"/>
<area shape="rect" title=" " alt="" coords="2995,131,3082,158"/>
<area shape="rect" href="FIRRTLOps_8h.html" title=" " alt="" coords="1257,392,1405,433"/>
<area shape="rect" title=" " alt="" coords="3039,310,3166,337"/>
<area shape="rect" title=" " alt="" coords="3190,303,3338,344"/>
<area shape="rect" title=" " alt="" coords="1484,489,1687,515"/>
<area shape="rect" title=" " alt="" coords="661,489,825,515"/>
<area shape="rect" title=" " alt="" coords="1248,481,1429,523"/>
<area shape="rect" title=" " alt="" coords="1725,481,1912,523"/>
<area shape="rect" title=" " alt="" coords="3363,310,3541,337"/>
<area shape="rect" title=" " alt="" coords="3565,310,3643,337"/>
<area shape="rect" title=" " alt="" coords="3667,310,3741,337"/>
<area shape="rect" href="LLVM_8h.html" title=" " alt="" coords="1077,399,1232,426"/>
<area shape="rect" href="CHIRRTLDialect_8h.html" title=" " alt="" coords="1579,303,1727,344"/>
<area shape="rect" title=" " alt="" coords="2203,489,2389,515"/>
<area shape="rect" title=" " alt="" coords="3011,489,3138,515"/>
<area shape="rect" href="InstanceGraphBase_8h.html" title=" " alt="" coords="405,303,592,344"/>
<area shape="rect" title=" " alt="" coords="94,399,266,426"/>
<area shape="rect" title=" " alt="" coords="460,399,623,426"/>
<area shape="rect" title=" " alt="" coords="290,399,435,426"/>
<area shape="rect" href="HWOps_8h.html" title=" " alt="" coords="647,399,838,426"/>
<area shape="rect" title=" " alt="" coords="2030,489,2178,515"/>
<area shape="rect" href="Support_2Namespace_8h.html" title=" " alt="" coords="1155,310,1352,337"/>
<area shape="rect" title=" " alt="" coords="1480,399,1637,426"/>
<area shape="rect" title=" " alt="" coords="1529,221,1698,247"/>
<area shape="rect" title=" " alt="" coords="862,399,1053,426"/>
<area shape="rect" title=" " alt="" coords="2263,399,2409,426"/>
<area shape="rect" title=" " alt="" coords="2709,392,2877,433"/>
<area shape="rect" title=" " alt="" coords="2433,399,2685,426"/>
<area shape="rect" href="CombDialect_8h.html" title=" " alt="" coords="3003,392,3146,433"/>
<area shape="rect" title=" " alt="" coords="3170,399,3393,426"/>
<area shape="rect" href="SVAttributes_8h.html" title=" " alt="" coords="2053,310,2270,337"/>
<area shape="rect" href="SVTypes_8h.html" title=" " alt="" coords="2346,310,2537,337"/>
<area shape="rect" title=" " alt="" coords="1854,310,2029,337"/>
</map>
</div>
</div>
<p><a href="EmitOMIR_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="EmitOMIR_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;omir&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab90c4f64baf3d45ff4d0d3e8dfdd6723"><td class="memItemLeft" align="right" valign="top">static IntegerAttr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="EmitOMIR_8cpp.html#ab90c4f64baf3d45ff4d0d3e8dfdd6723">isOMSRAM</a> (Attribute &amp;node)</td></tr>
<tr class="memdesc:ab90c4f64baf3d45ff4d0d3e8dfdd6723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if an <code>OMNode</code> is an <code>OMSRAM</code> and requires special treatment of its instance path field.  <a href="EmitOMIR_8cpp.html#ab90c4f64baf3d45ff4d0d3e8dfdd6723">More...</a><br /></td></tr>
<tr class="separator:ab90c4f64baf3d45ff4d0d3e8dfdd6723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61cbd27d842371901549cd214835e62"><td class="memItemLeft" align="right" valign="top">static std::optional&lt; Attribute &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="EmitOMIR_8cpp.html#ae61cbd27d842371901549cd214835e62">scatterOMIR</a> (Attribute original, <a class="el" href="structcirct_1_1firrtl_1_1ApplyState.html">ApplyState</a> &amp;state)</td></tr>
<tr class="memdesc:ae61cbd27d842371901549cd214835e62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively walk <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model IR and convert FIRRTL targets to identifiers while scattering trackers into the newAnnotations argument.  <a href="EmitOMIR_8cpp.html#ae61cbd27d842371901549cd214835e62">More...</a><br /></td></tr>
<tr class="separator:ae61cbd27d842371901549cd214835e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac553aeea817849bdd38e194c760ee562"><td class="memItemLeft" align="right" valign="top">static std::optional&lt; std::pair&lt; StringRef, DictionaryAttr &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="EmitOMIR_8cpp.html#ac553aeea817849bdd38e194c760ee562">scatterOMField</a> (Attribute original, const Attribute root, unsigned index, <a class="el" href="structcirct_1_1firrtl_1_1ApplyState.html">ApplyState</a> &amp;state)</td></tr>
<tr class="memdesc:ac553aeea817849bdd38e194c760ee562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Field into an optional pair of a string key and a dictionary attribute.  <a href="EmitOMIR_8cpp.html#ac553aeea817849bdd38e194c760ee562">More...</a><br /></td></tr>
<tr class="separator:ac553aeea817849bdd38e194c760ee562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609bc3168bd585765a49ba42b905180d"><td class="memItemLeft" align="right" valign="top">static std::optional&lt; DictionaryAttr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="EmitOMIR_8cpp.html#a609bc3168bd585765a49ba42b905180d">scatterOMNode</a> (Attribute original, const Attribute root, <a class="el" href="structcirct_1_1firrtl_1_1ApplyState.html">ApplyState</a> &amp;state)</td></tr>
<tr class="memdesc:a609bc3168bd585765a49ba42b905180d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Node to an optional dictionary, convert source locator strings to location attributes, and scatter FIRRTL targets into the circuit.  <a href="EmitOMIR_8cpp.html#a609bc3168bd585765a49ba42b905180d">More...</a><br /></td></tr>
<tr class="separator:a609bc3168bd585765a49ba42b905180d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;omir&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="EmitOMIR_8cpp_source.html#l00031">31</a> of file <a class="el" href="EmitOMIR_8cpp_source.html">EmitOMIR.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab90c4f64baf3d45ff4d0d3e8dfdd6723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab90c4f64baf3d45ff4d0d3e8dfdd6723">&#9670;&nbsp;</a></span>isOMSRAM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static IntegerAttr isOMSRAM </td>
          <td>(</td>
          <td class="paramtype">Attribute &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if an <code>OMNode</code> is an <code>OMSRAM</code> and requires special treatment of its instance path field. </p>
<p>This returns the ID of the tracker stored in the <code>instancePath</code> or <code>finalPath</code> field if the node has an array field <code>omType</code> that contains a <code>OMString:OMSRAM</code> entry. </p>

<p class="definition">Definition at line <a class="el" href="EmitOMIR_8cpp_source.html#l00163">163</a> of file <a class="el" href="EmitOMIR_8cpp_source.html">EmitOMIR.cpp</a>.</p>

</div>
</div>
<a id="ac553aeea817849bdd38e194c760ee562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac553aeea817849bdd38e194c760ee562">&#9670;&nbsp;</a></span>scatterOMField()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::optional&lt;std::pair&lt;StringRef, DictionaryAttr&gt; &gt; scatterOMField </td>
          <td>(</td>
          <td class="paramtype">Attribute&#160;</td>
          <td class="paramname"><em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Attribute&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcirct_1_1firrtl_1_1ApplyState.html">ApplyState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Field into an optional pair of a string key and a dictionary attribute. </p>
<p>Expand internal source locator strings to location attributes. Scatter any FIRRTL targets into the circuit. If this is an illegal <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Field return None.</p>
<p>Each <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Field consists of three mandatory members with the following names and types:</p>
<ul>
<li>"info": Source Locator String</li>
<li>"name": String</li>
<li>"value": <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model IR</li>
</ul>
<p>The key is the "name" and the dictionary consists of the "info" and "value" members. Each value is recursively traversed to scatter any FIRRTL targets that may be used inside it.</p>
<p>This conversion from an object (dictionary) to key&ndash;value pair is safe because each <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Field in an <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Node must have a unique "name". Anything else is illegal <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model. </p>

<p class="definition">Definition at line <a class="el" href="EmitOMIR_8cpp_source.html#l00356">356</a> of file <a class="el" href="EmitOMIR_8cpp_source.html">EmitOMIR.cpp</a>.</p>

<p class="reference">References <a class="el" href="FIRRTLAnnotationHelper_8h_source.html#l00257">circt::firrtl::ApplyState::circuit</a>, <a class="el" href="Utility_8h_source.html#l00033">lec::errs()</a>, <a class="el" href="CalyxOps_8cpp_source.html#l00042">circt::calyx::direction::get()</a>, <a class="el" href="namespacecirct_1_1firrtl.html#a3ef0f8172c255545eccf2616b85adba9">circt::firrtl::maybeStringToLocation()</a>, <a class="el" href="AnnotationDetails_8h_source.html#l00051">circt::firrtl::omirAnnoClass</a>, and <a class="el" href="EmitOMIR_8cpp_source.html#l00213">scatterOMIR()</a>.</p>

<p class="reference">Referenced by <a class="el" href="EmitOMIR_8cpp_source.html#l00422">scatterOMNode()</a>.</p>

</div>
</div>
<a id="ae61cbd27d842371901549cd214835e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61cbd27d842371901549cd214835e62">&#9670;&nbsp;</a></span>scatterOMIR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::optional&lt;Attribute&gt; scatterOMIR </td>
          <td>(</td>
          <td class="paramtype">Attribute&#160;</td>
          <td class="paramname"><em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcirct_1_1firrtl_1_1ApplyState.html">ApplyState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursively walk <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model IR and convert FIRRTL targets to identifiers while scattering trackers into the newAnnotations argument. </p>
<p><a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model IR consists of a type hierarchy built around recursive arrays and dictionaries whose leaves are "string-encoded types". This is an <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model-specific construct that puts type information alongside a value. Concretely, these look like: </p><pre class="fragment">'OM' type ':' value
</pre><p> This function is only concerned with unpacking types whose values are FIRRTL targets. This is because these need to be kept up-to-date with modifications made to the circuit whereas other types are just passing through CIRCT.</p>
<p>At a later time this understanding may be expanded or <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model IR may become its own Dialect. At this time, this function is trying to do as minimal work as possible to just validate that the OMIR looks okay without doing lots of unnecessary unpacking/repacking of string-encoded types. </p>

<p class="definition">Definition at line <a class="el" href="EmitOMIR_8cpp_source.html#l00213">213</a> of file <a class="el" href="EmitOMIR_8cpp_source.html">EmitOMIR.cpp</a>.</p>

<p class="reference">References <a class="el" href="FIRRTLAnnotationHelper_8h_source.html#l00260">circt::firrtl::ApplyState::addToWorklistFn</a>, <a class="el" href="FIRRTLAnnotationHelper_8h_source.html#l00257">circt::firrtl::ApplyState::circuit</a>, <a class="el" href="CalyxOps_8cpp_source.html#l00042">circt::calyx::direction::get()</a>, <a class="el" href="FIRRTLAnnotations_8cpp_source.html#l00690">circt::firrtl::isOMIRStringEncodedPassthrough()</a>, <a class="el" href="FIRRTLAnnotationHelper_8h_source.html#l00276">circt::firrtl::ApplyState::newID()</a>, and <a class="el" href="AnnotationDetails_8h_source.html#l00055">circt::firrtl::omirTrackerAnnoClass</a>.</p>

<p class="reference">Referenced by <a class="el" href="EmitOMIR_8cpp_source.html#l00356">scatterOMField()</a>.</p>

</div>
</div>
<a id="a609bc3168bd585765a49ba42b905180d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a609bc3168bd585765a49ba42b905180d">&#9670;&nbsp;</a></span>scatterOMNode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::optional&lt;DictionaryAttr&gt; scatterOMNode </td>
          <td>(</td>
          <td class="paramtype">Attribute&#160;</td>
          <td class="paramname"><em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Attribute&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcirct_1_1firrtl_1_1ApplyState.html">ApplyState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Node to an optional dictionary, convert source locator strings to location attributes, and scatter FIRRTL targets into the circuit. </p>
<p>If this is an illegal <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Node, then return None.</p>
<p>An <a class="el" href="structObject.html" title="Provides an Object class by simply wrapping the OMObject CAPI.">Object</a> Model Node is expected to look like:</p>
<ul>
<li>"info": Source Locator String</li>
<li>"id": String-encoded integer ('OMID' ':' Integer)</li>
<li>"fields": Array&lt;Object&gt;</li>
</ul>
<p>The "fields" member may be absent. If so, then construct an empty array. </p>
<p>The input attribute must be a dictionary.</p>

<p class="definition">Definition at line <a class="el" href="EmitOMIR_8cpp_source.html#l00422">422</a> of file <a class="el" href="EmitOMIR_8cpp_source.html">EmitOMIR.cpp</a>.</p>

<p class="reference">References <a class="el" href="FIRRTLAnnotationHelper_8h_source.html#l00257">circt::firrtl::ApplyState::circuit</a>, <a class="el" href="Utility_8h_source.html#l00033">lec::errs()</a>, <a class="el" href="CalyxOps_8cpp_source.html#l00042">circt::calyx::direction::get()</a>, <a class="el" href="namespacecirct_1_1firrtl.html#a3ef0f8172c255545eccf2616b85adba9">circt::firrtl::maybeStringToLocation()</a>, <a class="el" href="AnnotationDetails_8h_source.html#l00051">circt::firrtl::omirAnnoClass</a>, and <a class="el" href="EmitOMIR_8cpp_source.html#l00356">scatterOMField()</a>.</p>

<p class="reference">Referenced by <a class="el" href="EmitOMIR_8cpp_source.html#l00492">circt::firrtl::applyOMIR()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 30 2023 00:29:42 for CIRCT by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
